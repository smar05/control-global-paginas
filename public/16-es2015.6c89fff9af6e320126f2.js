(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"1zgT":function(i,o,n){"use strict";n.r(o),n.d(o,"EditProductoPageModule",(function(){return z}));var t=n("ofXK"),e=n("3Pt+"),c=n("TEn/"),r=n("tyNb"),a=n("mrSG"),b=n("PSD3"),s=n.n(b),l=n("fXoL"),u=n("lXRa"),d=n("a/9d");function g(i,o){1&i&&(l.Nb(0,"ion-title"),l.ic(1,"Crear producto"),l.Mb())}function f(i,o){1&i&&(l.Nb(0,"ion-title"),l.ic(1,"Editar producto"),l.Mb())}function p(i,o){1&i&&(l.Lb(0),l.Jb(1,"img",6),l.Kb())}function h(i,o){1&i&&(l.Nb(0,"ion-fab-button",24),l.Jb(1,"ion-icon",25),l.Mb())}function m(i,o){1&i&&(l.Nb(0,"ion-fab-button",26),l.Jb(1,"ion-icon",27),l.Mb())}function M(i,o){if(1&i){const i=l.Ob();l.Nb(0,"ion-row"),l.Nb(1,"ion-col",19),l.Nb(2,"ion-item"),l.Nb(3,"ion-label",10),l.ic(4,"Subvariante"),l.Mb(),l.Nb(5,"ion-input",30),l.Vb("ngModelChange",(function(o){return l.ec(i),l.Xb().$implicit.nombre=o})),l.Mb(),l.Mb(),l.Mb(),l.Nb(6,"ion-col",13),l.Nb(7,"ion-item"),l.Nb(8,"ion-label",10),l.ic(9,"Precio"),l.Mb(),l.Nb(10,"ion-input",36),l.Vb("ngModelChange",(function(o){return l.ec(i),l.Xb().$implicit.precio=o})),l.Mb(),l.Mb(),l.Mb(),l.Nb(11,"ion-col",37),l.Nb(12,"ion-fab-button",38),l.Vb("click",(function(){l.ec(i);const o=l.Xb().index;return l.Xb(4).deleteSubVariante(o)})),l.Jb(13,"ion-icon",33),l.Mb(),l.Mb(),l.Mb()}if(2&i){const i=l.Xb().$implicit;l.yb(5),l.cc("ngModel",i.nombre),l.yb(5),l.cc("ngModel",i.precio)}}function N(i,o){if(1&i&&(l.Lb(0),l.hc(1,M,14,2,"ion-row",4),l.Kb()),2&i){const i=o.$implicit;l.yb(1),l.cc("ngIf",i.mostrar)}}function v(i,o){if(1&i){const i=l.Ob();l.Nb(0,"ion-card"),l.Nb(1,"ion-card-header"),l.Nb(2,"ion-card-title"),l.Nb(3,"ion-row"),l.Nb(4,"ion-col",29),l.Nb(5,"ion-item"),l.Nb(6,"ion-label",10),l.ic(7,"Variante"),l.Mb(),l.Nb(8,"ion-input",30),l.Vb("ngModelChange",(function(o){return l.ec(i),l.Xb(3).producto.variantesOp=o})),l.Mb(),l.Mb(),l.Mb(),l.Nb(9,"ion-col",31),l.Nb(10,"ion-fab-button",32),l.Vb("click",(function(){return l.ec(i),l.Xb(3).deleteVariante()})),l.Jb(11,"ion-icon",33),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(12,"ion-card-content"),l.hc(13,N,2,1,"ng-container",34),l.Nb(14,"ion-button",35),l.Vb("click",(function(){return l.ec(i),l.Xb(3).agregarSubVariante()})),l.Nb(15,"b"),l.ic(16,"Agregar subvariante"),l.Mb(),l.Mb(),l.Mb(),l.Mb()}if(2&i){const i=l.Xb(3);l.yb(8),l.cc("ngModel",i.producto.variantesOp),l.yb(5),l.cc("ngForOf",i.subVariantes)}}function V(i,o){if(1&i){const i=l.Ob();l.Nb(0,"ion-button",22),l.Vb("click",(function(){return l.ec(i),l.Xb(3).agregarVariante()})),l.Nb(1,"b"),l.ic(2,"Agregar variante"),l.Mb(),l.Mb()}}function y(i,o){if(1&i&&(l.Lb(0),l.Lb(1),l.hc(2,v,17,2,"ion-card",4),l.Kb(),l.hc(3,V,3,0,"ion-button",28),l.Kb()),2&i){const i=l.Xb(2);l.yb(2),l.cc("ngIf",null!=i.producto.variantesOp),l.yb(1),l.cc("ngIf",null==i.producto.variantesOp)}}function I(i,o){if(1&i){const i=l.Ob();l.Nb(0,"ion-card"),l.Nb(1,"ion-item"),l.Nb(2,"ion-label",10),l.ic(3,"Precio"),l.Mb(),l.Nb(4,"ion-input",36),l.Vb("ngModelChange",(function(o){return l.ec(i),l.Xb(2).producto.precio=o})),l.Mb(),l.Mb(),l.Mb()}if(2&i){const i=l.Xb(2);l.yb(4),l.cc("ngModel",i.producto.precio)}}function k(i,o){if(1&i){const i=l.Ob();l.Nb(0,"ion-button",39),l.Vb("click",(function(){return l.ec(i),l.Xb(2).disponible()})),l.Mb()}}function C(i,o){if(1&i){const i=l.Ob();l.Nb(0,"ion-button",40),l.Vb("click",(function(){return l.ec(i),l.Xb(2).disponible()})),l.Mb()}}function X(i,o){if(1&i&&(l.Nb(0,"ion-select-option",41),l.ic(1),l.Mb()),2&i){const i=o.$implicit;l.cc("value",i.id),l.yb(1),l.kc(" ",i.nombre," ")}}function w(i,o){if(1&i&&l.Jb(0,"img",42),2&i){const i=l.Xb(2);l.cc("src",i.producto.imagen1,l.fc)}}function x(i,o){1&i&&l.Jb(0,"img",43)}function O(i,o){if(1&i&&l.Jb(0,"img",42),2&i){const i=l.Xb(2);l.cc("src",i.producto.imagen2,l.fc)}}function B(i,o){1&i&&l.Jb(0,"img",43)}function L(i,o){if(1&i&&l.Jb(0,"img",42),2&i){const i=l.Xb(2);l.cc("src",i.producto.imagen3,l.fc)}}function P(i,o){1&i&&l.Jb(0,"img",43)}function A(i,o){if(1&i&&l.Jb(0,"img",42),2&i){const i=l.Xb(2);l.cc("src",i.producto.imagen4,l.fc)}}function J(i,o){1&i&&l.Jb(0,"img",43)}function E(i,o){if(1&i){const i=l.Ob();l.Nb(0,"ion-button",44),l.Vb("click",(function(){return l.ec(i),l.Xb(2).borrar()})),l.ic(1,"Borrar"),l.Mb()}}function R(i,o){if(1&i){const i=l.Ob();l.Lb(0),l.Nb(1,"ion-fab",7),l.Vb("click",(function(){return l.ec(i),l.Xb().destacado()})),l.hc(2,h,2,0,"ion-fab-button",8),l.hc(3,m,2,0,"ion-fab-button",9),l.Mb(),l.Nb(4,"ion-card"),l.Nb(5,"ion-card-header"),l.Nb(6,"ion-card-title"),l.Nb(7,"b"),l.ic(8,"Producto id: "),l.Mb(),l.ic(9),l.Mb(),l.Mb(),l.Mb(),l.Nb(10,"ion-card"),l.Nb(11,"ion-item"),l.Nb(12,"ion-label",10),l.ic(13,"Nombre"),l.Mb(),l.Nb(14,"ion-input",11),l.Vb("ngModelChange",(function(o){return l.ec(i),l.Xb().producto.nombre=o})),l.Mb(),l.Mb(),l.Mb(),l.Nb(15,"ion-card"),l.Nb(16,"ion-item"),l.Nb(17,"ion-label",10),l.ic(18,"Referencia"),l.Mb(),l.Nb(19,"ion-input",11),l.Vb("ngModelChange",(function(o){return l.ec(i),l.Xb().producto.ref=o})),l.Mb(),l.Mb(),l.Mb(),l.Nb(20,"ion-card"),l.Nb(21,"ion-item"),l.Nb(22,"ion-label",10),l.ic(23,"Descripcion"),l.Mb(),l.Nb(24,"ion-textarea",11),l.Vb("ngModelChange",(function(o){return l.ec(i),l.Xb().producto.descripcion=o})),l.Mb(),l.Mb(),l.Mb(),l.Nb(25,"ion-card"),l.Nb(26,"ion-item"),l.Nb(27,"ion-label"),l.ic(28,"Variantes"),l.Mb(),l.Nb(29,"ion-checkbox",12),l.Vb("ngModelChange",(function(o){return l.ec(i),l.Xb().producto.variantes=o})),l.Mb(),l.Mb(),l.Mb(),l.hc(30,y,4,2,"ng-container",4),l.hc(31,I,5,1,"ion-card",4),l.Nb(32,"ion-card"),l.Nb(33,"ion-card-content"),l.Nb(34,"ion-row"),l.Nb(35,"ion-col",13),l.Nb(36,"b"),l.ic(37,"Disponible:"),l.Mb(),l.Mb(),l.Nb(38,"ion-col",14),l.hc(39,k,1,0,"ion-button",15),l.hc(40,C,1,0,"ion-button",16),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(41,"ion-card"),l.Nb(42,"ion-item"),l.Nb(43,"ion-label"),l.ic(44,"Categoria"),l.Mb(),l.Nb(45,"ion-select",17),l.Vb("ngModelChange",(function(o){return l.ec(i),l.Xb().producto.categoria=o})),l.hc(46,X,2,2,"ion-select-option",18),l.Mb(),l.Mb(),l.Mb(),l.Nb(47,"ion-row"),l.Nb(48,"ion-col",19),l.Nb(49,"ion-card",2),l.Vb("click",(function(){return l.ec(i),l.Xb().galeria(0)})),l.hc(50,w,1,1,"img",20),l.hc(51,x,1,0,"img",21),l.Mb(),l.Mb(),l.Nb(52,"ion-col",19),l.Nb(53,"ion-card",2),l.Vb("click",(function(){return l.ec(i),l.Xb().galeria(1)})),l.hc(54,O,1,1,"img",20),l.hc(55,B,1,0,"img",21),l.Mb(),l.Mb(),l.Mb(),l.Nb(56,"ion-row"),l.Nb(57,"ion-col",19),l.Nb(58,"ion-card",2),l.Vb("click",(function(){return l.ec(i),l.Xb().galeria(2)})),l.hc(59,L,1,1,"img",20),l.hc(60,P,1,0,"img",21),l.Mb(),l.Mb(),l.Nb(61,"ion-col",19),l.Nb(62,"ion-card",2),l.Vb("click",(function(){return l.ec(i),l.Xb().galeria(3)})),l.hc(63,A,1,1,"img",20),l.hc(64,J,1,0,"img",21),l.Mb(),l.Mb(),l.Mb(),l.Nb(65,"ion-button",22),l.Vb("click",(function(){return l.ec(i),l.Xb().guardar()})),l.ic(66,"Guardar"),l.Mb(),l.hc(67,E,2,0,"ion-button",23),l.Kb()}if(2&i){const i=l.Xb();l.yb(2),l.cc("ngIf",0==i.producto.destacado),l.yb(1),l.cc("ngIf",1==i.producto.destacado),l.yb(6),l.kc(" ",i.producto.id," "),l.yb(5),l.cc("ngModel",i.producto.nombre),l.yb(5),l.cc("ngModel",i.producto.ref),l.yb(5),l.cc("ngModel",i.producto.descripcion),l.yb(5),l.cc("ngModel",i.producto.variantes),l.yb(1),l.cc("ngIf",i.producto.variantes),l.yb(1),l.cc("ngIf",!i.producto.variantes),l.yb(8),l.cc("ngIf",1==i.producto.disponible),l.yb(1),l.cc("ngIf",0==i.producto.disponible),l.yb(5),l.cc("ngModel",i.producto.categoria),l.yb(1),l.cc("ngForOf",i.categoriasOrganizar()),l.yb(4),l.cc("ngIf",i.producto.imagen1),l.yb(1),l.cc("ngIf",!i.producto.imagen1),l.yb(3),l.cc("ngIf",i.producto.imagen2),l.yb(1),l.cc("ngIf",!i.producto.imagen2),l.yb(4),l.cc("ngIf",i.producto.imagen3),l.yb(1),l.cc("ngIf",!i.producto.imagen3),l.yb(3),l.cc("ngIf",i.producto.imagen4),l.yb(1),l.cc("ngIf",!i.producto.imagen4),l.yb(3),l.cc("ngIf",0!=i.id)}}const D=[{path:"",component:(()=>{class i{constructor(i,o){this.servicio=i,this.camera=o,this.id=null,this.producto={id:null,nombre:null,ref:null,descripcion:null,precio:null,imagen1:null,imagen2:null,imagen3:null,imagen4:null,disponible:null,destacado:null,categoria:null},this.categorias=[],this.subVariantes=[],this.loading=!0}ngOnInit(){this.servicio.inicio(),this.id=this.servicio.getId(),this.servicio.getCategorias().valueChanges().subscribe(i=>{this.categorias=i}),0!=this.id?this.servicio.getProducto(this.id).valueChanges().subscribe(i=>{this.producto=i,null==this.producto.variantesOp&&(this.producto.variantesOp=null),this.servicio.getSubVariantes(this.id).valueChanges().subscribe(i=>{this.subVariantes=i,null==this.subVariantes&&(this.subVariantes=[]);for(let o=0;o<this.subVariantes.length;o++)this.subVariantes[o].mostrar=!0}),this.loading=!1}):this.loading=!1,null==this.producto.disponible&&(this.producto.disponible=!1),null==this.producto.destacado&&(this.producto.destacado=!1),null==this.producto.variantes&&(this.producto.variantes=!1)}back(){this.servicio.back()}categoriasOrganizar(){return this.categorias=this.servicio.ordenar(this.categorias,"nombre"),this.categorias}guardar(){null==this.producto.categoria||""==this.producto.categoria||null==this.producto.categoria?this.servicio.presentAlert("Error","Ingrese la categoria del producto"):(0==this.id?(this.producto.id=this.id=Date.now(),this.servicio.setId(this.id),this.servicio.exito("Producto Creado")):this.servicio.exito("Producto actualizado"),0==this.producto.variantes&&(this.subVariantes=[],this.producto.variantesOp=null,this.producto.subVariante=[]),this.servicio.saveProducto(this.id,this.producto,this.subVariantes),this.servicio.back())}borrar(){this.confirmar("Eliminar","si","No","Producto eliminado","El producto ha sido eliminado con exito")}confirmar(i,o,n,t,e){s.a.fire({title:i,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:o,cancelButtonText:n}).then(i=>{i.isConfirmed&&(s.a.fire(t,e,"success"),this.servicio.deleteProducto(this.id),this.back())})}galeria(i){return Object(a.a)(this,void 0,void 0,(function*(){const{value:o}=yield s.a.fire({title:"Selecciona una imagen",input:"file",inputAttributes:{accept:"image/*","aria-label":"Upload your profile picture"}});if(0==i)if(o){const i=new FileReader;i.onload=i=>{this.producto.imagen1=i.target.result,this.servicio.exito("Listo")},i.readAsDataURL(o)}else this.servicio.presentAlert("Error","Ha ocurrido un error");else if(1==i){if(o){const i=new FileReader;i.onload=i=>{if(o){const i=new FileReader;i.onload=i=>{this.producto.imagen2=i.target.result,this.servicio.exito("Listo")},i.readAsDataURL(o)}else this.servicio.presentAlert("Error","Ha ocurrido un error")},i.readAsDataURL(o)}}else if(2==i){if(o){const i=new FileReader;i.onload=i=>{if(o){const i=new FileReader;i.onload=i=>{this.producto.imagen3=i.target.result,this.servicio.exito("Listo")},i.readAsDataURL(o)}else this.servicio.presentAlert("Error","Ha ocurrido un error")},i.readAsDataURL(o)}}else if(3==i&&o){const i=new FileReader;i.onload=i=>{if(o){const i=new FileReader;i.onload=i=>{this.producto.imagen4=i.target.result,this.servicio.exito("Listo")},i.readAsDataURL(o)}else this.servicio.presentAlert("Error","Ha ocurrido un error")},i.readAsDataURL(o)}}))}disponible(){this.producto.disponible=1!=this.producto.disponible}destacado(){this.producto.destacado=1!=this.producto.destacado}agregarVariante(){return Object(a.a)(this,void 0,void 0,(function*(){const{value:i}=yield s.a.fire({title:"Nombre de la variante",input:"text",inputLabel:"Ingrese el nombre",inputPlaceholder:"Ingrese el nombre"});null!=i&&null!=i?(this.producto.variantesOp=i,this.producto.subVariante=[],this.subVariantes=[],s.a.fire("Variante creada: "+i)):this.servicio.presentAlert("Error","Ingrese una nombre")}))}deleteVariante(){s.a.fire({title:"\xbfDesea borrar la variante?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Borrar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(s.a.fire("Eliminado","Eliminado con exito","success"),this.producto.variantesOp=null,this.producto.variantes=!1,this.producto.subVariante=[],this.subVariantes=[])})}agregarSubVariante(){return Object(a.a)(this,void 0,void 0,(function*(){const{value:i}=yield s.a.fire({title:"Nombre de la subvariante",input:"text",inputLabel:"Ingrese el nombre",inputPlaceholder:"Ingrese el nombre"});if(null!=i&&null!=i){let o={id:null,nombre:null,precio:0};o.id=Date.now(),o.nombre=i,o.mostrar=!0,this.subVariantes.push(o),s.a.fire("Subvariante creada: "+i)}else this.servicio.presentAlert("Error","Ingrese una nombre")}))}deleteSubVariante(i){s.a.fire({title:"\xbfDesea borrar la subvariante?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Borrar",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&(this.subVariantes[i].mostrar=!1,this.subVariantes[i].nombre=null,this.subVariantes[i].precio=null,s.a.fire("Eliminado","Eliminado con exito","success"))})}}return i.\u0275fac=function(o){return new(o||i)(l.Ib(u.a),l.Ib(d.a))},i.\u0275cmp=l.Cb({type:i,selectors:[["app-edit-producto"]],decls:9,vars:4,consts:[["color","dark"],["slot","start"],[3,"click"],["name","caret-back-outline"],[4,"ngIf"],["color","medium"],["src","../../assets/imagenes/loading.gif",1,"icon2",2,"border-radius","50%"],["horizontal","end","vertical","top","slot","fixed",3,"click"],["color","danger",4,"ngIf"],["color","success",4,"ngIf"],["position","floating"],[3,"ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],["size","4"],["size","8"],["expand","full","shape","round","color","success",3,"click",4,"ngIf"],["expand","full","shape","round","color","danger",3,"click",4,"ngIf"],["placeholder","Select One",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["size","6"],["class","icon",3,"src",4,"ngIf"],["src","../../assets/imagenes/plus.svg","class","icon",4,"ngIf"],["expand","full",3,"click"],["expand","full","color","danger",3,"click",4,"ngIf"],["color","danger"],["name","star-outline"],["color","success"],["name","star"],["expand","full",3,"click",4,"ngIf"],["size","10"],["type","text",3,"ngModel","ngModelChange"],["size","2","color","danger"],["color","danger",3,"click"],["name","trash-outline"],[4,"ngFor","ngForOf"],["expand","full","color","warning",3,"click"],["type","number",3,"ngModel","ngModelChange"],["size","2","color","warning"],["color","warning",3,"click"],["expand","full","shape","round","color","success",3,"click"],["expand","full","shape","round","color","danger",3,"click"],[3,"value"],[1,"icon",3,"src"],["src","../../assets/imagenes/plus.svg",1,"icon"],["expand","full","color","danger",3,"click"]],template:function(i,o){1&i&&(l.Nb(0,"ion-toolbar",0),l.Nb(1,"ion-buttons",1),l.Nb(2,"ion-button",2),l.Vb("click",(function(){return o.back()})),l.Jb(3,"ion-icon",3),l.Mb(),l.Mb(),l.hc(4,g,2,0,"ion-title",4),l.hc(5,f,2,0,"ion-title",4),l.Mb(),l.Nb(6,"ion-content",5),l.hc(7,p,2,0,"ng-container",4),l.hc(8,R,68,22,"ng-container",4),l.Mb()),2&i&&(l.yb(4),l.cc("ngIf",0==o.id),l.yb(1),l.cc("ngIf",0!=o.id),l.yb(2),l.cc("ngIf",1==o.loading),l.yb(1),l.cc("ngIf",0==o.loading))},directives:[c.C,c.e,c.d,c.s,t.k,c.m,c.B,c.n,c.f,c.h,c.j,c.u,c.v,c.t,c.K,e.d,e.e,c.A,c.k,c.b,c.g,c.x,c.l,c.y,c.J,t.j,c.o,c.G,c.z],styles:[".icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.icon[_ngcontent-%COMP%], .icon2[_ngcontent-%COMP%]{display:block;width:50%}.icon2[_ngcontent-%COMP%]{margin:50% auto;border-radius:50%}"]}),i})()}];let F=(()=>{class i{}return i.\u0275mod=l.Gb({type:i}),i.\u0275inj=l.Fb({factory:function(o){return new(o||i)},imports:[[r.i.forChild(D)],r.i]}),i})(),z=(()=>{class i{}return i.\u0275mod=l.Gb({type:i}),i.\u0275inj=l.Fb({factory:function(o){return new(o||i)},imports:[[t.b,e.a,c.D,F]]}),i})()}}]);