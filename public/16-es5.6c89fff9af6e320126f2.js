!function(){function n(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function i(n,i){for(var o=0;o<i.length;o++){var e=i[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"1zgT":function(o,e,t){"use strict";t.r(e),t.d(e,"EditProductoPageModule",(function(){return K}));var r=t("ofXK"),c=t("3Pt+"),a=t("TEn/"),b=t("tyNb"),u=t("mrSG"),l=t("PSD3"),s=t.n(l),d=t("fXoL"),g=t("lXRa"),f=t("a/9d");function p(n,i){1&n&&(d.Nb(0,"ion-title"),d.ic(1,"Crear producto"),d.Mb())}function h(n,i){1&n&&(d.Nb(0,"ion-title"),d.ic(1,"Editar producto"),d.Mb())}function m(n,i){1&n&&(d.Lb(0),d.Jb(1,"img",6),d.Kb())}function v(n,i){1&n&&(d.Nb(0,"ion-fab-button",24),d.Jb(1,"ion-icon",25),d.Mb())}function M(n,i){1&n&&(d.Nb(0,"ion-fab-button",26),d.Jb(1,"ion-icon",27),d.Mb())}function N(n,i){if(1&n){var o=d.Ob();d.Nb(0,"ion-row"),d.Nb(1,"ion-col",19),d.Nb(2,"ion-item"),d.Nb(3,"ion-label",10),d.ic(4,"Subvariante"),d.Mb(),d.Nb(5,"ion-input",30),d.Vb("ngModelChange",(function(n){return d.ec(o),d.Xb().$implicit.nombre=n})),d.Mb(),d.Mb(),d.Mb(),d.Nb(6,"ion-col",13),d.Nb(7,"ion-item"),d.Nb(8,"ion-label",10),d.ic(9,"Precio"),d.Mb(),d.Nb(10,"ion-input",36),d.Vb("ngModelChange",(function(n){return d.ec(o),d.Xb().$implicit.precio=n})),d.Mb(),d.Mb(),d.Mb(),d.Nb(11,"ion-col",37),d.Nb(12,"ion-fab-button",38),d.Vb("click",(function(){d.ec(o);var n=d.Xb().index;return d.Xb(4).deleteSubVariante(n)})),d.Jb(13,"ion-icon",33),d.Mb(),d.Mb(),d.Mb()}if(2&n){var e=d.Xb().$implicit;d.yb(5),d.cc("ngModel",e.nombre),d.yb(5),d.cc("ngModel",e.precio)}}function y(n,i){if(1&n&&(d.Lb(0),d.hc(1,N,14,2,"ion-row",4),d.Kb()),2&n){var o=i.$implicit;d.yb(1),d.cc("ngIf",o.mostrar)}}function k(n,i){if(1&n){var o=d.Ob();d.Nb(0,"ion-card"),d.Nb(1,"ion-card-header"),d.Nb(2,"ion-card-title"),d.Nb(3,"ion-row"),d.Nb(4,"ion-col",29),d.Nb(5,"ion-item"),d.Nb(6,"ion-label",10),d.ic(7,"Variante"),d.Mb(),d.Nb(8,"ion-input",30),d.Vb("ngModelChange",(function(n){return d.ec(o),d.Xb(3).producto.variantesOp=n})),d.Mb(),d.Mb(),d.Mb(),d.Nb(9,"ion-col",31),d.Nb(10,"ion-fab-button",32),d.Vb("click",(function(){return d.ec(o),d.Xb(3).deleteVariante()})),d.Jb(11,"ion-icon",33),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(12,"ion-card-content"),d.hc(13,y,2,1,"ng-container",34),d.Nb(14,"ion-button",35),d.Vb("click",(function(){return d.ec(o),d.Xb(3).agregarSubVariante()})),d.Nb(15,"b"),d.ic(16,"Agregar subvariante"),d.Mb(),d.Mb(),d.Mb(),d.Mb()}if(2&n){var e=d.Xb(3);d.yb(8),d.cc("ngModel",e.producto.variantesOp),d.yb(5),d.cc("ngForOf",e.subVariantes)}}function V(n,i){if(1&n){var o=d.Ob();d.Nb(0,"ion-button",22),d.Vb("click",(function(){return d.ec(o),d.Xb(3).agregarVariante()})),d.Nb(1,"b"),d.ic(2,"Agregar variante"),d.Mb(),d.Mb()}}function w(n,i){if(1&n&&(d.Lb(0),d.Lb(1),d.hc(2,k,17,2,"ion-card",4),d.Kb(),d.hc(3,V,3,0,"ion-button",28),d.Kb()),2&n){var o=d.Xb(2);d.yb(2),d.cc("ngIf",null!=o.producto.variantesOp),d.yb(1),d.cc("ngIf",null==o.producto.variantesOp)}}function C(n,i){if(1&n){var o=d.Ob();d.Nb(0,"ion-card"),d.Nb(1,"ion-item"),d.Nb(2,"ion-label",10),d.ic(3,"Precio"),d.Mb(),d.Nb(4,"ion-input",36),d.Vb("ngModelChange",(function(n){return d.ec(o),d.Xb(2).producto.precio=n})),d.Mb(),d.Mb(),d.Mb()}if(2&n){var e=d.Xb(2);d.yb(4),d.cc("ngModel",e.producto.precio)}}function I(n,i){if(1&n){var o=d.Ob();d.Nb(0,"ion-button",39),d.Vb("click",(function(){return d.ec(o),d.Xb(2).disponible()})),d.Mb()}}function x(n,i){if(1&n){var o=d.Ob();d.Nb(0,"ion-button",40),d.Vb("click",(function(){return d.ec(o),d.Xb(2).disponible()})),d.Mb()}}function X(n,i){if(1&n&&(d.Nb(0,"ion-select-option",41),d.ic(1),d.Mb()),2&n){var o=i.$implicit;d.cc("value",o.id),d.yb(1),d.kc(" ",o.nombre," ")}}function O(n,i){if(1&n&&d.Jb(0,"img",42),2&n){var o=d.Xb(2);d.cc("src",o.producto.imagen1,d.fc)}}function R(n,i){1&n&&d.Jb(0,"img",43)}function P(n,i){if(1&n&&d.Jb(0,"img",42),2&n){var o=d.Xb(2);d.cc("src",o.producto.imagen2,d.fc)}}function B(n,i){1&n&&d.Jb(0,"img",43)}function L(n,i){if(1&n&&d.Jb(0,"img",42),2&n){var o=d.Xb(2);d.cc("src",o.producto.imagen3,d.fc)}}function A(n,i){1&n&&d.Jb(0,"img",43)}function E(n,i){if(1&n&&d.Jb(0,"img",42),2&n){var o=d.Xb(2);d.cc("src",o.producto.imagen4,d.fc)}}function J(n,i){1&n&&d.Jb(0,"img",43)}function D(n,i){if(1&n){var o=d.Ob();d.Nb(0,"ion-button",44),d.Vb("click",(function(){return d.ec(o),d.Xb(2).borrar()})),d.ic(1,"Borrar"),d.Mb()}}function F(n,i){if(1&n){var o=d.Ob();d.Lb(0),d.Nb(1,"ion-fab",7),d.Vb("click",(function(){return d.ec(o),d.Xb().destacado()})),d.hc(2,v,2,0,"ion-fab-button",8),d.hc(3,M,2,0,"ion-fab-button",9),d.Mb(),d.Nb(4,"ion-card"),d.Nb(5,"ion-card-header"),d.Nb(6,"ion-card-title"),d.Nb(7,"b"),d.ic(8,"Producto id: "),d.Mb(),d.ic(9),d.Mb(),d.Mb(),d.Mb(),d.Nb(10,"ion-card"),d.Nb(11,"ion-item"),d.Nb(12,"ion-label",10),d.ic(13,"Nombre"),d.Mb(),d.Nb(14,"ion-input",11),d.Vb("ngModelChange",(function(n){return d.ec(o),d.Xb().producto.nombre=n})),d.Mb(),d.Mb(),d.Mb(),d.Nb(15,"ion-card"),d.Nb(16,"ion-item"),d.Nb(17,"ion-label",10),d.ic(18,"Referencia"),d.Mb(),d.Nb(19,"ion-input",11),d.Vb("ngModelChange",(function(n){return d.ec(o),d.Xb().producto.ref=n})),d.Mb(),d.Mb(),d.Mb(),d.Nb(20,"ion-card"),d.Nb(21,"ion-item"),d.Nb(22,"ion-label",10),d.ic(23,"Descripcion"),d.Mb(),d.Nb(24,"ion-textarea",11),d.Vb("ngModelChange",(function(n){return d.ec(o),d.Xb().producto.descripcion=n})),d.Mb(),d.Mb(),d.Mb(),d.Nb(25,"ion-card"),d.Nb(26,"ion-item"),d.Nb(27,"ion-label"),d.ic(28,"Variantes"),d.Mb(),d.Nb(29,"ion-checkbox",12),d.Vb("ngModelChange",(function(n){return d.ec(o),d.Xb().producto.variantes=n})),d.Mb(),d.Mb(),d.Mb(),d.hc(30,w,4,2,"ng-container",4),d.hc(31,C,5,1,"ion-card",4),d.Nb(32,"ion-card"),d.Nb(33,"ion-card-content"),d.Nb(34,"ion-row"),d.Nb(35,"ion-col",13),d.Nb(36,"b"),d.ic(37,"Disponible:"),d.Mb(),d.Mb(),d.Nb(38,"ion-col",14),d.hc(39,I,1,0,"ion-button",15),d.hc(40,x,1,0,"ion-button",16),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(41,"ion-card"),d.Nb(42,"ion-item"),d.Nb(43,"ion-label"),d.ic(44,"Categoria"),d.Mb(),d.Nb(45,"ion-select",17),d.Vb("ngModelChange",(function(n){return d.ec(o),d.Xb().producto.categoria=n})),d.hc(46,X,2,2,"ion-select-option",18),d.Mb(),d.Mb(),d.Mb(),d.Nb(47,"ion-row"),d.Nb(48,"ion-col",19),d.Nb(49,"ion-card",2),d.Vb("click",(function(){return d.ec(o),d.Xb().galeria(0)})),d.hc(50,O,1,1,"img",20),d.hc(51,R,1,0,"img",21),d.Mb(),d.Mb(),d.Nb(52,"ion-col",19),d.Nb(53,"ion-card",2),d.Vb("click",(function(){return d.ec(o),d.Xb().galeria(1)})),d.hc(54,P,1,1,"img",20),d.hc(55,B,1,0,"img",21),d.Mb(),d.Mb(),d.Mb(),d.Nb(56,"ion-row"),d.Nb(57,"ion-col",19),d.Nb(58,"ion-card",2),d.Vb("click",(function(){return d.ec(o),d.Xb().galeria(2)})),d.hc(59,L,1,1,"img",20),d.hc(60,A,1,0,"img",21),d.Mb(),d.Mb(),d.Nb(61,"ion-col",19),d.Nb(62,"ion-card",2),d.Vb("click",(function(){return d.ec(o),d.Xb().galeria(3)})),d.hc(63,E,1,1,"img",20),d.hc(64,J,1,0,"img",21),d.Mb(),d.Mb(),d.Mb(),d.Nb(65,"ion-button",22),d.Vb("click",(function(){return d.ec(o),d.Xb().guardar()})),d.ic(66,"Guardar"),d.Mb(),d.hc(67,D,2,0,"ion-button",23),d.Kb()}if(2&n){var e=d.Xb();d.yb(2),d.cc("ngIf",0==e.producto.destacado),d.yb(1),d.cc("ngIf",1==e.producto.destacado),d.yb(6),d.kc(" ",e.producto.id," "),d.yb(5),d.cc("ngModel",e.producto.nombre),d.yb(5),d.cc("ngModel",e.producto.ref),d.yb(5),d.cc("ngModel",e.producto.descripcion),d.yb(5),d.cc("ngModel",e.producto.variantes),d.yb(1),d.cc("ngIf",e.producto.variantes),d.yb(1),d.cc("ngIf",!e.producto.variantes),d.yb(8),d.cc("ngIf",1==e.producto.disponible),d.yb(1),d.cc("ngIf",0==e.producto.disponible),d.yb(5),d.cc("ngModel",e.producto.categoria),d.yb(1),d.cc("ngForOf",e.categoriasOrganizar()),d.yb(4),d.cc("ngIf",e.producto.imagen1),d.yb(1),d.cc("ngIf",!e.producto.imagen1),d.yb(3),d.cc("ngIf",e.producto.imagen2),d.yb(1),d.cc("ngIf",!e.producto.imagen2),d.yb(4),d.cc("ngIf",e.producto.imagen3),d.yb(1),d.cc("ngIf",!e.producto.imagen3),d.yb(3),d.cc("ngIf",e.producto.imagen4),d.yb(1),d.cc("ngIf",!e.producto.imagen4),d.yb(3),d.cc("ngIf",0!=e.id)}}var z,S,T,j=[{path:"",component:(z=function(){function o(i,e){n(this,o),this.servicio=i,this.camera=e,this.id=null,this.producto={id:null,nombre:null,ref:null,descripcion:null,precio:null,imagen1:null,imagen2:null,imagen3:null,imagen4:null,disponible:null,destacado:null,categoria:null},this.categorias=[],this.subVariantes=[],this.loading=!0}var e,t,r;return e=o,(t=[{key:"ngOnInit",value:function(){var n=this;this.servicio.inicio(),this.id=this.servicio.getId(),this.servicio.getCategorias().valueChanges().subscribe((function(i){n.categorias=i})),0!=this.id?this.servicio.getProducto(this.id).valueChanges().subscribe((function(i){n.producto=i,null==n.producto.variantesOp&&(n.producto.variantesOp=null),n.servicio.getSubVariantes(n.id).valueChanges().subscribe((function(i){n.subVariantes=i,null==n.subVariantes&&(n.subVariantes=[]);for(var o=0;o<n.subVariantes.length;o++)n.subVariantes[o].mostrar=!0})),n.loading=!1})):this.loading=!1,null==this.producto.disponible&&(this.producto.disponible=!1),null==this.producto.destacado&&(this.producto.destacado=!1),null==this.producto.variantes&&(this.producto.variantes=!1)}},{key:"back",value:function(){this.servicio.back()}},{key:"categoriasOrganizar",value:function(){return this.categorias=this.servicio.ordenar(this.categorias,"nombre"),this.categorias}},{key:"guardar",value:function(){null==this.producto.categoria||""==this.producto.categoria||null==this.producto.categoria?this.servicio.presentAlert("Error","Ingrese la categoria del producto"):(0==this.id?(this.producto.id=this.id=Date.now(),this.servicio.setId(this.id),this.servicio.exito("Producto Creado")):this.servicio.exito("Producto actualizado"),0==this.producto.variantes&&(this.subVariantes=[],this.producto.variantesOp=null,this.producto.subVariante=[]),this.servicio.saveProducto(this.id,this.producto,this.subVariantes),this.servicio.back())}},{key:"borrar",value:function(){this.confirmar("Eliminar","si","No","Producto eliminado","El producto ha sido eliminado con exito")}},{key:"confirmar",value:function(n,i,o,e,t){var r=this;s.a.fire({title:n,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:i,cancelButtonText:o}).then((function(n){n.isConfirmed&&(s.a.fire(e,t,"success"),r.servicio.deleteProducto(r.id),r.back())}))}},{key:"galeria",value:function(n){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o,e,t,r,c,a,b=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.fire({title:"Selecciona una imagen",input:"file",inputAttributes:{accept:"image/*","aria-label":"Upload your profile picture"}});case 2:o=i.sent,e=o.value,0==n?e?((t=new FileReader).onload=function(n){b.producto.imagen1=n.target.result,b.servicio.exito("Listo")},t.readAsDataURL(e)):this.servicio.presentAlert("Error","Ha ocurrido un error"):1==n?e&&((r=new FileReader).onload=function(n){if(e){var i=new FileReader;i.onload=function(n){b.producto.imagen2=n.target.result,b.servicio.exito("Listo")},i.readAsDataURL(e)}else b.servicio.presentAlert("Error","Ha ocurrido un error")},r.readAsDataURL(e)):2==n?e&&((c=new FileReader).onload=function(n){if(e){var i=new FileReader;i.onload=function(n){b.producto.imagen3=n.target.result,b.servicio.exito("Listo")},i.readAsDataURL(e)}else b.servicio.presentAlert("Error","Ha ocurrido un error")},c.readAsDataURL(e)):3==n&&e&&((a=new FileReader).onload=function(n){if(e){var i=new FileReader;i.onload=function(n){b.producto.imagen4=n.target.result,b.servicio.exito("Listo")},i.readAsDataURL(e)}else b.servicio.presentAlert("Error","Ha ocurrido un error")},a.readAsDataURL(e));case 5:case"end":return i.stop()}}),i,this)})))}},{key:"disponible",value:function(){this.producto.disponible=1!=this.producto.disponible}},{key:"destacado",value:function(){this.producto.destacado=1!=this.producto.destacado}},{key:"agregarVariante",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.fire({title:"Nombre de la variante",input:"text",inputLabel:"Ingrese el nombre",inputPlaceholder:"Ingrese el nombre"});case 2:i=n.sent,null!=(o=i.value)&&null!=o?(this.producto.variantesOp=o,this.producto.subVariante=[],this.subVariantes=[],s.a.fire("Variante creada: "+o)):this.servicio.presentAlert("Error","Ingrese una nombre");case 5:case"end":return n.stop()}}),n,this)})))}},{key:"deleteVariante",value:function(){var n=this;s.a.fire({title:"\xbfDesea borrar la variante?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Borrar",cancelButtonText:"Cancelar"}).then((function(i){i.isConfirmed&&(s.a.fire("Eliminado","Eliminado con exito","success"),n.producto.variantesOp=null,n.producto.variantes=!1,n.producto.subVariante=[],n.subVariantes=[])}))}},{key:"agregarSubVariante",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.fire({title:"Nombre de la subvariante",input:"text",inputLabel:"Ingrese el nombre",inputPlaceholder:"Ingrese el nombre"});case 2:i=n.sent,null!=(o=i.value)&&null!=o?((e={id:null,nombre:null,precio:0}).id=Date.now(),e.nombre=o,e.mostrar=!0,this.subVariantes.push(e),s.a.fire("Subvariante creada: "+o)):this.servicio.presentAlert("Error","Ingrese una nombre");case 5:case"end":return n.stop()}}),n,this)})))}},{key:"deleteSubVariante",value:function(n){var i=this;s.a.fire({title:"\xbfDesea borrar la subvariante?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Borrar",cancelButtonText:"Cancelar"}).then((function(o){o.isConfirmed&&(i.subVariantes[n].mostrar=!1,i.subVariantes[n].nombre=null,i.subVariantes[n].precio=null,s.a.fire("Eliminado","Eliminado con exito","success"))}))}}])&&i(e.prototype,t),r&&i(e,r),o}(),z.\u0275fac=function(n){return new(n||z)(d.Ib(g.a),d.Ib(f.a))},z.\u0275cmp=d.Cb({type:z,selectors:[["app-edit-producto"]],decls:9,vars:4,consts:[["color","dark"],["slot","start"],[3,"click"],["name","caret-back-outline"],[4,"ngIf"],["color","medium"],["src","../../assets/imagenes/loading.gif",1,"icon2",2,"border-radius","50%"],["horizontal","end","vertical","top","slot","fixed",3,"click"],["color","danger",4,"ngIf"],["color","success",4,"ngIf"],["position","floating"],[3,"ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],["size","4"],["size","8"],["expand","full","shape","round","color","success",3,"click",4,"ngIf"],["expand","full","shape","round","color","danger",3,"click",4,"ngIf"],["placeholder","Select One",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["size","6"],["class","icon",3,"src",4,"ngIf"],["src","../../assets/imagenes/plus.svg","class","icon",4,"ngIf"],["expand","full",3,"click"],["expand","full","color","danger",3,"click",4,"ngIf"],["color","danger"],["name","star-outline"],["color","success"],["name","star"],["expand","full",3,"click",4,"ngIf"],["size","10"],["type","text",3,"ngModel","ngModelChange"],["size","2","color","danger"],["color","danger",3,"click"],["name","trash-outline"],[4,"ngFor","ngForOf"],["expand","full","color","warning",3,"click"],["type","number",3,"ngModel","ngModelChange"],["size","2","color","warning"],["color","warning",3,"click"],["expand","full","shape","round","color","success",3,"click"],["expand","full","shape","round","color","danger",3,"click"],[3,"value"],[1,"icon",3,"src"],["src","../../assets/imagenes/plus.svg",1,"icon"],["expand","full","color","danger",3,"click"]],template:function(n,i){1&n&&(d.Nb(0,"ion-toolbar",0),d.Nb(1,"ion-buttons",1),d.Nb(2,"ion-button",2),d.Vb("click",(function(){return i.back()})),d.Jb(3,"ion-icon",3),d.Mb(),d.Mb(),d.hc(4,p,2,0,"ion-title",4),d.hc(5,h,2,0,"ion-title",4),d.Mb(),d.Nb(6,"ion-content",5),d.hc(7,m,2,0,"ng-container",4),d.hc(8,F,68,22,"ng-container",4),d.Mb()),2&n&&(d.yb(4),d.cc("ngIf",0==i.id),d.yb(1),d.cc("ngIf",0!=i.id),d.yb(2),d.cc("ngIf",1==i.loading),d.yb(1),d.cc("ngIf",0==i.loading))},directives:[a.C,a.e,a.d,a.s,r.k,a.m,a.B,a.n,a.f,a.h,a.j,a.u,a.v,a.t,a.K,c.d,c.e,a.A,a.k,a.b,a.g,a.x,a.l,a.y,a.J,r.j,a.o,a.G,a.z],styles:[".icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.icon[_ngcontent-%COMP%], .icon2[_ngcontent-%COMP%]{display:block;width:50%}.icon2[_ngcontent-%COMP%]{margin:50% auto;border-radius:50%}"]}),z)}],U=((T=function i(){n(this,i)}).\u0275mod=d.Gb({type:T}),T.\u0275inj=d.Fb({factory:function(n){return new(n||T)},imports:[[b.i.forChild(j)],b.i]}),T),K=((S=function i(){n(this,i)}).\u0275mod=d.Gb({type:S}),S.\u0275inj=d.Fb({factory:function(n){return new(n||S)},imports:[[r.b,c.a,a.D,U]]}),S)}}])}();